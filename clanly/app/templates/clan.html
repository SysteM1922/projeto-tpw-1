{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="" />
  <meta name="keywords" content="" />
  <title>Clanly</title>
  <link rel="icon" href="{% static 'images/logo_solo.png' %}">
  <!-- <link rel="icon" href="images/fav.png" type="image/png" sizes="16x16"> -->

  <link rel="stylesheet" href="{% static 'css/main.min.css' %}" />
  <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  <link rel="stylesheet" href="{% static 'css/color.css' %}" />
  <link rel="stylesheet" href="{% static 'css/responsive.css' %}" />
  <link rel="stylesheet" href="https://unpkg.com/flowbite@latest/dist/flowbite.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/flowbite@latest/dist/flowbite.min.css" />

</head>

<body>
  <link rel="stylesheet" href="https://demos.creative-tim.com/notus-js/assets/styles/tailwind.css">
  <link rel="stylesheet"
    href="https://demos.creative-tim.com/notus-js/assets/vendor/@fortawesome/fontawesome-free/css/all.min.css">
  <link rel="stylesheet" href="https://unpkg.com/flowbite@latest/dist/flowbite.min.css" />

  <main class="profile-page">
    {% include "navbar.html" %}
    <section class="relative block h-500-px">
      <div class="absolute top-0 w-full h-full bg-center bg-cover" style="
                background-image: url('{% static clan.background.name %}');">
        <span id="blackOverlay" class="w-full h-full absolute opacity-50"></span>
      </div>
      <div class="top-auto bottom-0 left-0 right-0 w-full absolute pointer-events-none overflow-hidden h-70-px"
        style="transform: translateZ(0px)">
        <svg class="absolute bottom-0 overflow-hidden" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="none"
          version="1.1" viewBox="0 0 2560 100" x="0" y="0">
          <polygon class="text-blueGray-200 fill-current" points="2560 0 2560 100 0 100"></polygon>
        </svg>
      </div>
    </section>
    <section class="relative py-16 bg-purple-600">
      <div class="container mx-auto px-4">
        <div class="relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-xl rounded-lg -mt-64">
          <div class="px-6">
            <div class="flex flex-wrap justify-between">
              <div class="w-full lg:w-3/12 px-4 lg:order-2 flex justify-center">
                <div class="relative">
                  <img alt="..." src="{% static clan.communityimg.name %}"
                    class="shadow-xl rounded-full h-auto align-middle border-none absolute -m-16 -ml-20 lg:-ml-16 max-w-150-px">
                </div>
              </div>
              <div class="w-full lg:w-4/12 px-4 lg:order-3 lg:text-right lg:self-center">
                <div class="py-6 px-3 mt-32 sm:mt-0">
                  {% if bol == 1 %}
                  <a href="/clan/{{id}}/f">
                    <button
                      class="bg-purple-600 active:bg-purple-600 uppercase text-white font-bold hover:shadow-md shadow text-xs px-4 py-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                      type="button">
                      Follow
                    </button>
                  </a>
                  {% else %}
                  <a href="/clan/{{id}}/u">
                    <button
                      class="bg-white-600 active:bg-white-600 uppercase text-purple-600 font-bold hover:shadow-md shadow text-xs px-4 p y-2 rounded outline-none focus:outline-none sm:mr-2 mb-1 ease-linear transition-all duration-150"
                      type="button">
                      Unfollow
                    </button>
                  </a>
                  {% endif %}
                </div>
              </div>
              <div class="w-20% lg:w-2/12 px-4 lg:order-1">
                <div class="flex justify-between py-4 lg:pt-4 pt-8">
                  <div class="mr-4 p-3 text-center">
                    <span class="text-xl font-bold block uppercase tracking-wide text-blueGray-600">{{followers}}</span>
                    <span class="text-sm text-blueGray-400">Followers</span>
                  </div>
                  <div class="lg:mr-4 p-3 text-center">
                    <span class="text-xl font-bold block uppercase tracking-wide text-blueGray-600">{{n_posts}}</span>
                    <span class="text-sm text-blueGray-400">Posts</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="text-center mt-12">
              <h3 class="text-4xl font-semibold leading-normal mb-2 text-blueGray-700 mb-2">
                c/{{clan.name}}
              </h3>
              <div class="mb-2 text-blueGray-600">
                {{clan.description}}
              </div>
            </div>
            {% for p in posts %}
            <div class="mt-10 py-10 border-t border-blueGray-200 text-center">
              <div class="flex flex-wrap justify-center">
                <div class="w-full lg:w-4/12 px-4 ">
                  <div class=" rounded-lg overflow-hidden border w-full lg:w-12/12 md:w-12/12 bg-white mx-auto">
                    <div class="w-full flex justify-between p-3">
                      <div class="flex">
                        <div class="rounded-full h-8 w-8 bg-gray-500 flex items-center justify-center overflow-hidden">
                          <img src="{{clan.communityimg.url}}" alt="profilepic">
                        </div>
                        <span class="pt-1 ml-2 font-bold text-sm">c/{{clan.name}}</span>
                      </div>
                      {% if p.author == user %}
                      <div class="flex w-24 p-1">
                        <div id="tooltip-post" role="tooltip"
                          class="inline-block absolute invisible z-10 py-2 px-3 text-sm font-medium text-white bg-purple-900 rounded-lg shadow-sm opacity-0 transition-opacity duration-300 tooltip dark:bg-gray-700">
                          Edit Post
                          <div class="tooltip-arrow" data-popper-arrow></div>
                        </div>
                        <i class="text-2xl fa fa-wrench mr-2" data-tooltip-target="tooltip-post"
                          data-modal-toggle="post-modal"></i>
                        <div id="tooltip-postd" role="tooltip"
                          class="inline-block absolute invisible z-10 py-2 px-3 text-sm font-medium text-white bg-purple-900 rounded-lg shadow-sm opacity-0 transition-opacity duration-300 tooltip dark:bg-gray-700">
                          Delete Post
                          <div class="tooltip-arrow" data-popper-arrow></div>
                        </div>
                        <a href="/clan/{{p.id_post}}/d"> <i class="text-2xl fa fa-trash "
                            data-tooltip-target="tooltip-postd"></i> </a>
                      </div>
                      <div id="post-modal" tabindex="-1" aria-hidden="true"
                        class="hidden overflow-y-auto overflow-x-hidden fixed z-50 md:inset-0 h-modal md:h-50%">
                        <div
                          class="relative flex flex-col min-w-0 break-words w-8/12 mb-6 shadow-lg rounded-lg bg-blueGray-100 border-0">
                          <div class="rounded-t bg-white mb-0 px-6 py-6">
                            <div class="text-center flex justify-between">
                              <h6 class="text-blueGray-700 text-xl font-bold">
                                Edit Post
                              </h6>

                            </div>
                          </div>
                          <div class="flex-auto px-4 lg:px-10 py-10 pt-0">
                            <form action="/clan/{{p.id_post}}/e" method="POST">
                              {% csrf_token %}
                              <div class="mx-auto text-center pt-4">
                                <button
                                  class="bg-purple-500 text-white active:bg-purple-500 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 ease-linear transition-all duration-150"
                                  type="submit">
                                  Save
                                </button>
                              </div>

                              <h6 class="text-blueGray-400 text-sm mt-3 mb-6 font-bold uppercase">
                                Edit Post
                              </h6>
                              <div class="flex flex-wrap">
                                <div class="w-full lg:w-12/12 px-4">
                                  <div class="relative w-full mb-3">
                                    <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2"
                                      htmlfor="grid-password">
                                      Title
                                    </label>
                                    <textarea type="text" name="title"
                                      class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                                      rows="4">{{p.title}}</textarea>
                                  </div>
                                </div>
                                <div class="w-full lg:w-12/12 px-4">
                                  <div class="relative w-full mb-3">
                                    <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2"
                                      htmlfor="grid-password">
                                      Content
                                    </label>
                                    <textarea type="text" name="content"
                                      class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                                      rows="4">{{p.description}}</textarea>
                                  </div>
                                </div>
                              </div>
                            </form>
                          </div>
                        </div>
                      </div>
                      {% endif %}
                    </div>
                    <div class="px-3 pb-2">
                      <div class="pt-1">
                        <div class="mb-2 text-sm max-w-xl mx-auto">
                          <h1
                            class="mb-4 text-3xl font-extrabold leading-tight text-gray-900 lg:mb-6 lg:text-4xl dark:text-white text-center">
                            {{ p.title }}</h1>
                          <p class="text-gray-600 dark:text-gray-400 text-center">{{ p.description }}</p>
                        </div>
                      </div>
                      <div class="mb-2 mx-auto">
                        <hr class="mt-6 border-b-1 border-blueGray-300">
                        <div class="mb-2 text-sm">

                          <div id="accordion-flush" data-accordion="collapse"
                            data-active-classes="bg-white dark:bg-gray-900 text-gray-900 dark:text-white"
                            data-inactive-classes="text-gray-500 dark:text-gray-400">
                            <h2 id="accordion-flush-heading-1">
                              <button type="button"
                                class="flex items-center justify-center w-full py-5 font-medium text-left border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white"
                                data-accordion-target="#accordion-flush-body-1" aria-expanded="true"
                                aria-controls="accordion-flush-body-1">
                                <i class="fa fa-comment cursor-pointer mr-1"></i>
                                <span class="text-sm text-gray-400 font-medium">Comments</span>
                              </button>
                            </h2>
                            {% for c in comments %}
                            {% if c.post == p %}
                            <div id="accordion-flush-body-1" class="" aria-labelledby="accordion-flush-heading-1">
                              <div class="py-5 font-light border-b border-gray-200 dark:border-gray-700 flex">
                                <span class="font-medium mr-2">{{c.user.username}}</span> {{c.content}}
                                {% if c.user == user %}
                                <div class="w-20% px-3 my-auto ">
                                  <div id="tooltip-comment" role="tooltip"
                                    class="inline-block absolute invisible z-10 py-2 px-3 text-sm font-medium text-white bg-purple-900 rounded-lg shadow-sm opacity-0 transition-opacity duration-300 tooltip dark:bg-gray-700">
                                    Edit Comment
                                    <div class="tooltip-arrow" data-popper-arrow></div>
                                  </div>
                                  <i class="text-l fa fa-wrench" data-tooltip-target="tooltip-comment"
                                    data-modal-toggle="comment-modal"></i>
                                  <div id="tooltip-commentd" role="tooltip"
                                    class="inline-block absolute invisible z-10 py-2 px-3 text-sm font-medium text-white bg-purple-900 rounded-lg shadow-sm opacity-0 transition-opacity duration-300 tooltip dark:bg-gray-700">
                                    Delete Comment
                                    <div class="tooltip-arrow" data-popper-arrow></div>
                                  </div>
                                  <a href="/clan/post/{{c.id_comment}}/d" <i class="text-l fa fa-trash"
                                    data-tooltip-target="tooltip-commentd"></i>
                                  </a>

                                  <div id="comment-modal" tabindex="-1" aria-hidden="true"
                                    class="hidden overflow-y-auto overflow-x-hidden fixed z-50 md:inset-0 h-modal md:h-full">
                                    <div
                                      class="relative flex flex-col min-w-0 break-words w-12/12 mb-6 shadow-lg rounded-lg bg-blueGray-100 border-0">
                                      <div class="rounded-t bg-white mb-0 px-6 py-6">
                                        <div class="text-center flex justify-between">
                                          <h6 class="text-blueGray-700 text-xl font-bold">
                                            Edit Comment
                                          </h6>

                                        </div>
                                      </div>
                                      <div class="flex-auto px-4 lg:px-10 py-10 pt-0">
                                        <form action="/clan/post/{{c.id_comment}}/e" method="POST">
                                          {% csrf_token %}
                                          <div class="mx-auto text-center pt-4">
                                            <button
                                              class="bg-purple-500 text-white active:bg-purple-500 font-bold uppercase text-xs px-4 py-2 rounded shadow hover:shadow-md outline-none focus:outline-none mr-1 ease-linear transition-all duration-150"
                                              type="submit">
                                              Save
                                            </button>
                                          </div>

                                          <h6 class="text-blueGray-400 text-sm mt-3 mb-6 font-bold uppercase">
                                            Edit Comment
                                          </h6>
                                          <div class="w-full lg:w-12/12 px-4">
                                            <div class="relative w-full mb-3">
                                              <label class="block uppercase text-blueGray-600 text-xs font-bold mb-2"
                                                htmlfor="grid-password">
                                                Content
                                              </label>
                                              <textarea type="text" name="content"
                                                class="border-0 px-3 py-3 placeholder-blueGray-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                                                rows="4">{{c.content}}</textarea>
                                            </div>
                                          </div>
                                      </div>
                                      </form>
                                    </div>
                                  </div>
                                </div>
                                {% endif %}
                              </div>
                              {% endif %}
                              {% endfor %}

                              <form action="/clan/post/{{p.id_post}}/c" method="post">{% csrf_token %}
                                <input type="text" name="content"
                                  class="border-0 px-3 py-3 placeholder-purple-300 text-blueGray-600 bg-white rounded text-sm shadow focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                                  placeholder="Comment on this post">
                                <input type="submit" method="POST" hidden />
                              </form>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </section>
  </main>
  <!-- Main modal -->
  <script src="https://unpkg.com/flowbite@latest/dist/flowbite.js"></script>
</body>

</html>